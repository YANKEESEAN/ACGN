<html>

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no">

    <title>刺客伍六七</title>
    <link rel=stylesheet type='text/css' href="./css/spiritaway/cike.css">
    <link href="https://cdn.bootcdn.net/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">

</head>

<body class="cike">
    <header>
        <div class="nav-header">
            <p class="navbar-brand font-special"> 刺客伍六七</p>

            <ul>
                <li><a href="./index.html">首页</a></li>
                <li class="active"><a href="./cike.html">主要角色</a></li>
                <li><a href="./cikeStory.html">剧情简介</a></li>
                <li><a href="./cikeAuthor.html">作者介绍</a></li>
                <li><a href="./cikeComment.html">影评</a></li>
                <li><a href="./cikeLines.html">经典台词</a></li>
            </ul>
        </div>
    </header>

    <div class="swipe" id="swipe">
        <!-- 模糊背景 -->
        <div class="bg" id="swipe_bg"></div>
        <!-- 图片区域 -->
        <section>
            <!-- 图片显示 -->
            <div class="img-box" id="swipe_img_box">
                <a href="#" class="link" id="swipe_link">
                
                <img src="./images/6.13.jpg" alt="" class="img" id="swipe_img" ></a>
            </div>
            <!-- 指示点 -->
            <div class="select" id="swipe_select">
                <!-- <a href="#" class="item checked"></a>
                    <a href="#" class="item"></a>
                    <a href="#" class="item"></a> -->
            </div>
            <!-- 左侧翻页按钮 -->
            <div class="btn left" id="swipe_btn_left">
                <!-- 字体图标：左箭头 -->
                <i class="fa fa-angle-left" aria-hidden="true"></i>
            </div>
            <!-- 右侧翻页按钮 -->
            <div class="btn right" id="swipe_btn_right">
                <!-- 字体图标：右箭头 -->
                <i class="fa fa-angle-right" aria-hidden="true"></i>
            </div>
        </section>
    </div>
    <script>
        // 当前轮播图编号
        let current_index = -1;
        // 自动轮播定时器
        let swipe_timer = null;
        // 轮播图的图片地址与跳转链接
        let links = [
            { 'image': './images/6.13.jpg', 'target': '#1' },
            { 'image': './images/6.14.jpg', 'target': '#2' },
            { 'image': './images/6.15.jpg', 'target': '#3' },
            { 'image': './images/6.16.jpg', 'target': '#4' },
            { 'image': './images/6.17.jpg', 'target': '#5' },
            { 'image': './images/6.18.jpg', 'target': '#6' }
        ];

        // 需要操作到的元素
        let swipe = document.getElementById('swipe');
        let swipe_bg = document.getElementById('swipe_bg');
        let swipe_img_box = document.getElementById('swipe_img_box');
        let swipe_link = document.getElementById('swipe_link');
        let swipe_img = document.getElementById('swipe_img');
        let swipe_select = document.getElementById('swipe_select');
        let swipe_btn_left = document.getElementById('swipe_btn_left');
        let swipe_btn_right = document.getElementById('swipe_btn_right');

        // 事件
        // 切换图片
        let select = (index) => {
            // 停止播放
            stop();
            // 转数字
            index = Number(index);
            // 越界超过最大数量,直接返回
            if (index >= links.length) {
                return;
            }
            // 选中当前已选中的,直接返回
            if (current_index == index) {
                return;
            }
            // 取消当前指示点的选中状态
            if (current_index > -1) {
                swipe_select.children[current_index].classList.remove('checked');
            }
            // 变更当前轮播图的编号
            current_index = index;
            // 找到当前元素
            let current_link = links[current_index];
            // 背景变化
            swipe_bg.style.backgroundImage = 'url(' + current_link.image + ')';
            // 前景变化
            swipe_img.setAttribute('src', current_link.image);
            // 链接变化
            swipe_link.setAttribute('href', current_link.target);
            // 增加新的指示点的选中状态
            swipe_select.children[current_index].classList.add('checked');
        };
        // 自动切换图片
        let autoSelect = (index) => {
            // 转数字
            index = Number(index);
            // 越界超过最大数量，直接返回
            if (index >= links.length) {
                return;
            }
            // 选中当前已选中的，直接返回
            if (current_index == index) {
                return;
            }
            // 取消当前指示点的选中状态
            swipe_select.children[current_index].classList.remove('checked');
            // 变更当前轮播图的编号
            current_index = index;
            // 找到当前元素
            let current_link = links[current_index];
            // 前景图片
            // 第一步调整过渡时间
            swipe_img.style.transition = 'opacity 0.5s ease-in 0s';
            // 第二步调整不透明度为0.2
            swipe_img.style.opacity = 0.2;
            // 第三步延迟变换img图片，并重新定义透明度以及过渡时间和过渡方式
            setTimeout(() => {
                // 背景变化
                swipe_bg.style.backgroundImage = 'url(' + current_link.image + ')';
                // 前景变化
                swipe_img.setAttribute('src', current_link.image);
                // 链接变化
                swipe_link.setAttribute('href', current_link.target);
                // 不透明度变化
                swipe_img.style.transition = 'opacity 0.7s ease-out 0s';
                swipe_img.style.opacity = 1;
                // 增加新的指示点选中状态
                // 如果已经通过手动点击了，选中则此处不再执行
                if (!document.querySelector('.swipe .checked')) {
                    swipe_select.children[current_index].style.transition = 'background-color 0.5s';
                    swipe_select.children[current_index].classList.add('checked');
                }
            }, 500);
        };
        // 播放
        let play = () => {
            // 3秒切换一次
            swipe_timer = setInterval(() => {
                // 设置新的index
                let index = current_index + 1;
                // 右翻越界，切到第一张
                if (index >= links.length) {
                    index = 0;
                }
                // 加载新图片（这里选择自动，增加切换效果）
                autoSelect(index);
            }, 3000);
        };
        // 停止
        let stop = () => {
            if (swipe_timer) {
                clearInterval(swipe_timer);
                swipe_timer = null;
            }
        };
        // 初始化
        let init = () => {
            for (let i = 0; i < links.length; i++) {
                // 创建a元素
                let item = document.createElement('a');
                // 修改属性
                item.setAttribute('class', 'item');
                item.setAttribute('href', '#');
                item.setAttribute('data-index', i);
                // 追加元素
                swipe_select.appendChild(item);
            }
            // 默认第一张
            select(0);
            // 绑定各个事件并开始轮播
            bind();
            play();
        };
        // 绑定
        let bind = () => {
            // 左翻事件监听
            swipe_btn_left.addEventListener('click', () => {
                // 设置新的index
                let index = current_index - 1;
                // 左翻越界，切到最后一张
                if (index < 0) {
                    index = links.length - 1;
                }
                // 加载新图片
                select(index);
            });
            // 右翻事件监听
            swipe_btn_right.addEventListener('click', () => {
                // 设置新的index
                let index = current_index + 1;
                // 右翻越界，切到第一张
                if (index >= links.length) {
                    index = 0;
                }
                // 加载新图片
                select(index);
            });
            // 循环绑定指示器点击事件
            for (const key in swipe_select.children) {
                if (swipe_select.children.hasOwnProperty(key)) {
                    const element = swipe_select.children[key];
                    element.addEventListener('click', (e) => {
                        // 取消默认点击跳转
                        e.preventDefault();
                        // 跳转到当前指示点中data-index所指定的图片
                        select(e.target.dataset.index);
                    });
                }
            }
            // 绑定鼠标移入事件
            swipe.addEventListener('mouseover', (e) => {
                // 防止鼠标从子元素移出时触发
                if (e.relatedTarget && swipe.compareDocumentPosition(e.relatedTarget) == 10) {
                    stop();
                }
            });
            // 绑定鼠标移出事件
            swipe.addEventListener('mouseout', (e) => {
                // 防止鼠标从子元素移出时触发
                if (e.relatedTarget && swipe.compareDocumentPosition(e.relatedTarget) == 10) {
                    play();
                }
            });
            // 绑定鼠标移动事件
            swipe.addEventListener('mousemove', (e) => {
                stop();
            });
        };

        // 页面加载完毕，执行初始化
        window.addEventListener('load', () => {
            init();
        })
    </script>



    <div class="section">


        <div class="card">
            <div class="box">
                <div class="img-box">
                    <img src="./images/6.22.jpg" alt="">
                </div>
                <div class="con-box">
                    <div>
                        <h2>伍六七</h2>
                        <p>男主角，失忆前是第一刺客，代号柒，失忆后成了大保发廊的高级发型师。他性格假贱贱、真温柔、热血，身世是个谜，能够以气御剪，为了寻找自己的过去，走上了刺客之路。</p>
                    </div>
                </div>
            </div>
        </div>
        <div class="card">
            <div class="box">
                <div class="img-box">
                    <img src="./images/6.33.jpg" alt="">
                </div>
                <div class="con-box">
                    <div>
                        <h2>梅花十三</h2>
                        <p>女性角色，玄武国刺客，刺客排名37位，擅长使用双刀流和梅花镖，发辫上的短刃可以用于攻击。她讨厌男人，目标是击败所有男人，最终目标是击败自己的父亲。她性格冷漠、好强，内心其实很柔软。小时候拜玄武国刺客青凤为师，长大后受命来到小鸡岛收集情报，意外认识了伍六七。
                        </p>
                    </div>
                </div>
            </div>
        </div>
    <div class="card">
        <div class="box">
            <div class="img-box">
                <img src="./images/6.44.jpg" alt="">
            </div>
            <div class="con-box">
                <div>
                    <h2>鸡大保</h2>
                    <p>社会、拜金、讲义气、聪明的蓝羽鸡，大保J发廊老板兼伍六七的刺客经理人，曾经和伍六七一起卖牛杂，后来为了赚大钱怂恿伍六七当刺客，专门负责帮伍六七接刺客的活。他胆小怕事，但是总是装作一副什么都懂的样子，明明很穷，却摆出一副大老板的姿态。
                    </p>
                </div>
            </div>
        </div>
    </div>
        <div class="card">
            <div class="box">
                <div class="img-box">
                    <img src="./images/6.55.jpg" alt="">
                </div>
                <div class="con-box">
                    <div>
                        <h2>鸡小飞</h2>
                        <p>鸡大保最好的朋友大飞的儿子， 由鸡大保收养， 不会说话，只会发出小鸡的叫声，主要功能是用来把伍六七快速运送到任务地点，
                            所以也叫极速小飞鸡或者小飞鸡。在一些特殊的情况下，鸡小飞会变身成为暴走形态， 拥有很强的战斗力。</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="section">
        <div class="card1">
            <div class="box">
                <div class="img-box">
                    <img src="./images/6.56.jpg" alt="">
                </div>
                <div class="con-box">
                    <div>
                        <h2>青凤</h2>
                        <p>男性角色，七大暗影刺客之一，梅花十三的师父。曾是青云国王子，因刺客组织杀害了他的父母和青云国子民，青凤为了报仇加入玄武国的暗影刺客组织。</p>
                    </div>
                </div>
            </div>
        </div>
        <div class="card1">
            <div class="box">
                <div class="img-box">
                    <img src="./images/6.57.jpg" alt="">
                </div>
                <div class="con-box">
                    <div>
                        <h2>赤牙</h2>
                        <p>原名阿权，玄武国七大暗影刺客之一。早年为天莲派弟子，暗恋江惠莲，后因怨恨天莲派不准恋爱的 教规而偷学邪教武功血魔大法，被逐出师门。</p>
                    </div>
                </div>
            </div>
        </div>
        <div class="card1">
            <div class="box">
                <div class="img-box">
                    <img src="./images/6.58.jpg" alt="">
                </div>
                <div class="con-box">
                    <div>
                        <h2>江蕙莲</h2>
                        <p>人称江主任，原玄武国天莲派掌门，后被前任掌门逐出师门，来到小鸡岛，成为了小鸡岛纯净小岛协会净化环境小分队队长。</p>
                    </div>
                </div>
            </div>
        </div>


    </div>


</body>

</html>